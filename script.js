// Language translations for REDD+ Mangrove Community Portal
const translations = {
    english: {
        // Header
        portalSubtitle: "Transparency Portal",
        navDashboard: "Dashboard",
        navFinances: "Finances", 
        navCommunity: "Community",
        navCouncil: "BSM Council",
        logoutText: "Logout",
        
        // Dashboard Page
        dashboardTitle: "Community Dashboard",
        dashboardSubtitle: "Overview of Mangrove Restoration Project activities and community benefits",
        treesPlanted: "Mangroves Restored",
        benefitsDistributed: "Benefits Distributed",
        participatingHouseholds: "Participating Families",
        forestProtected: "Carbon Sequestered",
        benefitsChartTitle: "Benefits Distribution",
        progressChartTitle: "Mangrove Restoration Progress",
        recentActivities: "Recent Activities",
        activity1: "Mangrove planting completed in Sankandi - 50 hectares restored",
        activity2: "Quarterly benefit payments distributed to 320 households",
        activity3: "Oyster collection training completed for 45 women",
        upcomingEvents: "Upcoming Events",
        event1: "Community Meeting",
        event2: "Monitoring Team Visit",
        
        // Finances Page
        financesTitle: "Financial Transparency",
        financesSubtitle: "Complete overview of project finances and benefit distribution",
        totalBenefits: "Total Benefits Distributed",
        thisQuarter: "This Quarter",
        breakdown1: "To households:",
        breakdown2: "Community projects:",
        breakdown3: "Direct benefits:",
        breakdown4: "Project funds:",
        financeTrendTitle: "Financial Trends",
        revenueTitle: "Where Our Money Comes From",
        paymentHistory: "Payment History",
        dateHeader: "Date",
        typeHeader: "Payment Type",
        amountHeader: "Amount",
        statusHeader: "Status",
        payment1: "Quarterly Benefits",
        payment2: "Quarterly Benefits",
        payment3: "Quarterly Benefits",
        statusCompleted: "Completed",
        
        // Community Page
        communityTitle: "Our Community",
        communitySubtitle: "Community members, impact data, and project participation",
        totalMembers: "Total Members",
        activeHouseholds: "Active Households",
        participationRate: "Participation Rate",
        impactTitle: "Environmental & Social Impact",
        votingTitle: "Community Action Plan Voting",
        votingDescription: "Vote for the projects you want the community to prioritize in the next phase",
        project1: "Clean Water Initiative",
        project1Desc: "Installation of water wells in 3 villages",
        project2: "Education Support",
        project2Desc: "Scholarships for 25 students",
        project3: "Health Center Upgrade",
        project3Desc: "Medical equipment and facility improvements",
        communityProjects: "Community Projects",
        
        // BSM Council Page
        councilTitle: "BSM Council",
        councilSubtitle: "Benefit Sharing Mechanism Council Members and Activities",
        councilMembers: "Council Members",
        position1: "Chairperson",
        position2: "Secretary", 
        position3: "Treasurer",
        grievanceTitle: "Submit a Grievance",
        grievanceDescription: "If you have any concerns or issues, please let us know through the following methods:",
        recentGrievancesTitle: "Recent Grievances & Status",
        documentsTitle: "Project Documents",
        documentsDescription: "Download important project documents in your preferred language:",
        councilResponsibilities: "Council Responsibilities",
        responsibility1: "Manage and oversee fair distribution of benefits to all community members",
        responsibility2: "Monitor and guide community project implementation",
        responsibility3: "Ensure complete transparency in financial reporting and management",
        responsibility4: "Represent community interests in REDD+ platform meetings"
    },
    mandinka: {
        // Header
        portalSubtitle: "Laada Portal",
        navDashboard: "Dashboard",
        navFinances: "Wari", 
        navCommunity: "Siti",
        navCouncil: "BSM Kɔnko",
        logoutText: "Bɔta",
        
        // Dashboard Page
        dashboardTitle: "Siti Dashboard",
        dashboardSubtitle: "Bunkono dimiŋ porojɛti lafiyaluwo ani siti ɗaɓɓe la jarabi",
        treesPlanted: "Bunkono Dimiŋ",
        benefitsDistributed: "Ɗaɓɓe Ɓennude",
        participatingHouseholds: "Dontolu Kaŋ Duwolu",
        forestProtected: "Carbon Senuŋ",
        benefitsChartTitle: "Ɗaɓɓe Dimiŋ",
        progressChartTitle: "Bunkono Dimiŋ Lafiyaluwo",
        recentActivities: "Sahafɛn Lafiyaluw",
        activity1: "Bunkono dimiŋ lafiyaluwo bota Sankandi kaŋ - 50 hectares dimiŋ",
        activity2: "Benefisi wari dimiŋ 320 duwolu la saha fɛn na",
        activity3: "Oyster jama karanko 45 musolu la bota",
        upcomingEvents: "A bisimila Lafiyaluw",
        event1: "Siti Meeting",
        event2: "Monitoring Team Visit",
        
        // Finances Page
        financesTitle: "Wari Laada",
        financesSubtitle: "Porojɛti wariwo ani benefisi dimiŋ la jarabi",
        totalBenefits: "Ɗaɓɓe Ɓennude Moo",
        thisQuarter: "Saha Fɛn Nín",
        breakdown1: "Duwolu la:",
        breakdown2: "Siti porojɛtiw:",
        breakdown3: "Direct ɗaɓɓe:",
        breakdown4: "Porojɛti wari:",
        financeTrendTitle: "Wari Lafiyaluw",
        revenueTitle: "Ŋa Wari Be Jiyata",
        paymentHistory: "Wari Dimiŋ Tarihu",
        dateHeader: "Dɔnko",
        typeHeader: "Wari Fɛn",
        amountHeader: "Moo",
        statusHeader: "Dɔro",
        payment1: "Saha Fɛn Ɗaɓɓe",
        payment2: "Saha Fɛn Ɗaɓɓe",
        payment3: "Saha Fɛn Ɗaɓɓe",
        statusCompleted: "Bota",
        
        // Community Page
        communityTitle: "Ŋa Siti",
        communitySubtitle: "Siti dontolu, impact data, ani porojɛti dɔntaya",
        totalMembers: "Dontolu Moo",
        activeHouseholds: "Lafiya Duwolu",
        participationRate: "Dɔntaya Pɛsɛŋo",
        impactTitle: "Environmental & Social Impact",
        votingTitle: "Siti Action Plan Voting",
        votingDescription: "Vote porojɛtiw i ye lafiya siti si a daa fɛn na a bisimila",
        project1: "Clean Water Initiative",
        project1Desc: "Water wells dimiŋ 3 sitiw kaŋ",
        project2: "Education Support",
        project2Desc: "Scholarships 25 karandipo la",
        project3: "Health Center Upgrade",
        project3Desc: "Medical equipment ani facility improvements",
        communityProjects: "Siti Porojɛtiw",
        
        // BSM Council Page
        councilTitle: "BSM Kɔnko",
        councilSubtitle: "Benefisi Dimiŋ Laada Kɔnko Dontolu ani Lafiyaluw",
        councilMembers: "Kɔnko Dontolu",
        position1: "Chairperson",
        position2: "Secretary",
        position3: "Treasurer",
        grievanceTitle: "Grievance Dimiŋ",
        grievanceDescription: "Soo am problema, i si a lafita an ye an ye a jarabi",
        recentGrievancesTitle: "Sahafɛn Grievances & Dɔro",
        documentsTitle: "Porojɛti Documents",
        documentsDescription: "Download documents porojɛti la i ye language la i ye lafiya",
        councilResponsibilities: "Kɔnko Karanfilu",
        responsibility1: "Benefisi dimiŋ siti dontolu la karanfilu",
        responsibility2: "Siti porojɛti dimiŋ la jarabi",
        responsibility3: "Wari laada jarabi karanfilu",
        responsibility4: "Siti dɔntaya REDD+ meetingw la"
    },
    wolof: {
        // Header
        portalSubtitle: "Portal bu Wone",
        navDashboard: "Dashboard",
        navFinances: "Xaalis", 
        navCommunity: "Community",
        navCouncil: "BSM Council",
        logoutText: "Gener",
        
        // Dashboard Page
        dashboardTitle: "Dashboard bu Community bi",
        dashboardSubtitle: "Xoolal lépp lu ñu def ci project Restoration Mangrove ak benefis yi",
        treesPlanted: "Mangroves Restorées",
        benefitsDistributed: "Benefis yi ñu Joxe",
        participatingHouseholds: "Këy yi Jëmale ci",
        forestProtected: "Carbon Séquestré",
        benefitsChartTitle: "Benefis yi ñu Joxe",
        progressChartTitle: "Mangrove Restoration Progress",
        recentActivities: "Li ñu Doon Def Bii",
        activity1: "Gëm mangrove bi nekk Sankandi - 50 hectares restorées",
        activity2: "Njàngor yi ñu joxe 320 këy yi ci trimester bi",
        activity3: "Jàng oyster 45 jigéen yi",
        upcomingEvents: "Li Ñu Niyoo Def",
        event1: "Mbootaay bu Community",
        event2: "Equipe bu xool di ñëw",
        
        // Finances Page
        financesTitle: "Wone Xaalis",
        financesSubtitle: "Xoolal xaalis yu project bi ak benefis yi ñu joxe",
        totalBenefits: "Benefis yi ñu Joxe Ci Lépp",
        thisQuarter: "Trimester Bii",
        breakdown1: "Këy yi:",
        breakdown2: "Project yu community:",
        breakdown3: "Benefis direct:",
        breakdown4: "Xaalis project:",
        financeTrendTitle: "Xaalis yi ñu Doon Joxe",
        revenueTitle: "Fan La Xaalis bi Di Niyoo",
        paymentHistory: "Jëfandikoo yu Xaalis yi",
        dateHeader: "Bii",
        typeHeader: "Melo",
        amountHeader: "Juroom",
        statusHeader: "Màkkaan",
        payment1: "Benefis yu Trimester",
        payment2: "Benefis yu Trimester",
        payment3: "Benefis yu Trimester",
        statusCompleted: "Fànn",
        
        // Community Page
        communityTitle: "Sunu Community",
        communitySubtitle: "Way dëkk, impact data, ak jëmalekaay ci project",
        totalMembers: "Way Dëkk Ci Lépp",
        activeHouseholds: "Këy yi Jëmale ci",
        participationRate: "Baaxaayu Jëmalekaay",
        impactTitle: "Impact Environmental & Social",
        votingTitle: "Voting Plan Action Community",
        votingDescription: "Vote project yi nga bëgg community bi def ci phase bi di ñëw",
        project1: "Clean Water Initiative",
        project1Desc: "Doxum pënd yi ñu def ci 3 dëkk",
        project2: "Dimmbal ci Jàng",
        project2Desc: "Bourse ci 25 xale",
        project3: "Yokkatuwaayu Health Center",
        project3Desc: "Yëgléef yu medical ak yokkatuwaay",
        communityProjects: "Project yu Community",
        
        // BSM Council Page
        councilTitle: "BSM Council",
        councilSubtitle: "Way Council di séddandoo benefis ak li ñu def",
        councilMembers: "Way Council",
        position1: "Borom Mbootaay",
        position2: "Secretary",
        position3: "Treasurer",
        grievanceTitle: "Yónne Grievance",
        grievanceDescription: "Soo am problème, nu ngi la dégg ci method yii",
        recentGrievancesTitle: "Grievances Bii & Màkkaan",
        documentsTitle: "Documents Project",
        documentsDescription: "Download documents yu project ci language nga bëgg",
        councilResponsibilities: "Lépp lu ñu Wara Def",
        responsibility1: "Toppatu benefis yi ci way dëkk",
        responsibility2: "Xoolal project yu community yi",
        responsibility3: "Wone xaalis bi nekk ci anam gu wér",
        responsibility4: "Wakil community ci mbootaay yu REDD+"
    },
    fulla: {
        // Header
        portalSubtitle: "Portal Hollirde",
        navDashboard: "Dashboard",
        navFinances: "Caɗe", 
        navCommunity: "Community",
        navCouncil: "BSM Council",
        logoutText: "Yaltu",
        
        // Dashboard Page
        dashboardTitle: "Dashboard Community",
        dashboardSubtitle: "Yiyde golle Restoration Mangrove e ɗaɓɓe community",
        treesPlanted: "Mangroves Restored",
        benefitsDistributed: "Ɗaɓɓe Ɓennude",
        participatingHouseholds: "Ƴiɗe Gollude",
        forestProtected: "Carbon Ɓennude",
        benefitsChartTitle: "Ɗaɓɓe Ɓennude",
        progressChartTitle: "Mangrove Restoration Progress",
        recentActivities: "Golle Cakkitiingol",
        activity1: "Ceɗɗe mangrove heɓii e Sankandi - 50 hectares restored",
        activity2: "Ɗaɓɓe caɗe ɓennude 320 ɓiɗɗe cakkitiingol",
        activity3: "Jaŋde oyster heɓii 45 debbo",
        upcomingEvents: "Golle Arataaɗe",
        event1: "Meeting Community",
        event2: "Fedde yiyde arata",
        
        // Finances Page
        financesTitle: "Caɗe Hollirde",
        financesSubtitle: "Yiyde caɗe project e ɗaɓɓe ɓennude",
        totalBenefits: "Ɗaɓɓe Ɓennude Fuu",
        thisQuarter: "Cakkitiingol Ngon",
        breakdown1: "Ɓiɗɗe:",
        breakdown2: "Projecte community:",
        breakdown3: "Ɗaɓɓe direct:",
        breakdown4: "Caɗe project:",
        financeTrendTitle: "Caɗe Lafiyaluw",
        revenueTitle: "To Caɗe Ɗen Arata",
        paymentHistory: "Taariika Caɗe Ɓennude",
        dateHeader: "Ñalngu",
        typeHeader: "Fannu",
        amountHeader: "Ɓurɗu",
        statusHeader: "Ngonka",
        payment1: "Ɗaɓɓe Cakkitiingol",
        payment2: "Ɗaɓɓe Cakkitiingol",
        payment3: "Ɗaɓɓe Cakkitiingol",
        statusCompleted: "Ɓennii",
        
        // Community Page
        communityTitle: "Min Community",
        communitySubtitle: "Yimɓe community, impact data, e ɓamtaade project",
        totalMembers: "Yimɓe Fuu",
        activeHouseholds: "Ƴiɗe Gollude",
        participationRate: "Ɓamtaade Ɓurɗo",
        impactTitle: "Impact Environmental & Social",
        votingTitle: "Voting Plan Action Community",
        votingDescription: "Vote project ɗen aɗa yiɗi community ɓeydu e phase arata",
        project1: "Clean Water Initiative",
        project1Desc: "Nduddaku cecce ɗiɗi e 3 wuro",
        project2: "Wallitorde Jaŋde",
        project2Desc: "Jaŋde ɓursi 25 jannginooɓe",
        project3: "Ɓeydude Health Center",
        project3Desc: "Gawri medical e ɓeydude",
        communityProjects: "Projecte Community",
        
        // BSM Council Page
        councilTitle: "BSM Council",
        councilSubtitle: "Yimɓe Council ɓennude ɗaɓɓe e golle",
        councilMembers: "Yimɓe Council",
        position1: "Laamiiɗo",
        position2: "Secretary",
        position3: "Treasurer",
        grievanceTitle: "Ɗaɓɓit Grievance",
        grievanceDescription: "Soo am problema, anndu min ngam method ɗen",
        recentGrievancesTitle: "Grievances Cakkitiingol & Ngonka",
        documentsTitle: "Documente Project",
        documentsDescription: "Download documente project e language aɗa suɓa",
        councilResponsibilities: "Golle Wajjinde",
        responsibility1: "Fijirde ɓennude ɗaɓɓe e yimɓe community",
        responsibility2: "Yiyde golle projecte community",
        responsibility3: "Hollirde caɗe e anndal",
        responsibility4: "Wakil community e meetinge REDD+"
    }
};

// Current language state
let currentLanguage = 'english';

// Voting state
let userVoted = false;
let voteCounts = {
    water: 128,
    education: 100,
    health: 57
};

// Initialize the application
document.addEventListener('DOMContentLoaded', function() {
    console.log('REDD+ Mangrove Community Portal - Initializing...');
    
    // Check which page we're on and initialize accordingly
    const loginForm = document.getElementById('loginForm');
    const app = document.getElementById('app');
    
    if (loginForm) {
        console.log('Initializing login page...');
        initializeLoginPage();
    }
    
    if (app) {
        console.log('Initializing main application...');
        initializeAppPage();
    }
});

// Initialize login page
function initializeLoginPage() {
    // Get elements specific to login page
    const loginForm = document.getElementById('loginForm');
    const languageButtons = document.querySelectorAll('.lang-btn');
    
    // Set login page language buttons
    languageButtons.forEach(btn => {
        btn.addEventListener('click', function() {
            const lang = this.getAttribute('data-lang');
            switchLanguage(lang);
            
            // Update active state
            languageButtons.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
        });
    });

    // Login form submission
    if (loginForm) {
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // Simple authentication - accepts any non-empty credentials
            if (username.trim() !== '' && password.trim() !== '') {
                // Show loading state briefly for better UX
                const loginBtn = document.querySelector('.login-btn');
                const originalText = loginBtn.innerHTML;
                loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Logging in...';
                loginBtn.disabled = true;
                
                setTimeout(() => {
                    // Redirect to main app page
                    window.location.href = 'index.html';
                }, 1000);
            } else {
                alert('Please enter both username and password to continue.');
            }
        });
    }
}

// Initialize main application page
function initializeAppPage() {
    // Get elements specific to app page
    const appLanguageSelect = document.getElementById('appLanguage');
    const logoutBtn = document.getElementById('logoutBtn');
    const navItems = document.querySelectorAll('.nav-item');
    const contentPages = document.querySelectorAll('.content-page');
    
    // Initialize language selector
    if (appLanguageSelect) {
        appLanguageSelect.value = currentLanguage;
        appLanguageSelect.addEventListener('change', function() {
            switchLanguage(this.value);
        });
    }

    // Initialize navigation
    if (navItems.length > 0) {
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const targetPage = this.getAttribute('data-page');
                
                // Update active nav item
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
                
                // Show target page
                contentPages.forEach(page => page.classList.remove('active'));
                const targetElement = document.getElementById(targetPage);
                if (targetElement) {
                    targetElement.classList.add('active');
                }
                
                console.log(`Navigated to: ${targetPage}`);
            });
        });
    }

    // Initialize logout
    if (logoutBtn) {
        logoutBtn.addEventListener('click', function() {
            // Show loading state briefly
            const logoutBtn = document.querySelector('.logout-btn');
            const originalText = logoutBtn.innerHTML;
            logoutBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Logging out...';
            logoutBtn.disabled = true;
            
            setTimeout(() => {
                // Redirect back to login page
                window.location.href = 'login.html';
            }, 800);
        });
    }

    // Initialize app-specific features
    initializeCharts();
    initializeVoting();
    initializeDocumentDownloads();
    loadSampleData();
    addInteractiveFeatures();
    
    // Initialize grievance submission
    const submitGrievanceBtn = document.getElementById('submitGrievance');
    if (submitGrievanceBtn) {
        submitGrievanceBtn.addEventListener('click', function() {
            const grievanceText = document.getElementById('grievanceText').value;
            if (grievanceText.trim() !== '') {
                alert('Thank you for submitting your grievance. The BSM Council will review it soon.');
                document.getElementById('grievanceText').value = '';
            } else {
                alert('Please describe your grievance before submitting.');
            }
        });
    }
    
    console.log('Main application initialized successfully');
}

// Switch language function
function switchLanguage(lang) {
    currentLanguage = lang;
    document.documentElement.setAttribute('data-language', lang);
    
    const translation = translations[lang];
    
    if (translation) {
        // Update all translatable elements
        Object.keys(translation).forEach(key => {
            const elements = document.querySelectorAll(`[id="${key}"]`);
            elements.forEach(element => {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = translation[key];
                } else {
                    element.textContent = translation[key];
                }
            });
        });
    }
    
    // Update app language selector if it exists
    const appLanguageSelect = document.getElementById('appLanguage');
    if (appLanguageSelect) {
        appLanguageSelect.value = lang;
    }
    
    // Update login language buttons if they exist
    const languageButtons = document.querySelectorAll('.lang-btn');
    languageButtons.forEach(btn => {
        if (btn.getAttribute('data-lang') === lang) {
            btn.classList.add('active');
        } else {
            btn.classList.remove('active');
        }
    });
    
    console.log(`Language switched to: ${lang}`);
}

// Initialize voting system
function initializeVoting() {
    const voteButtons = document.querySelectorAll('.vote-btn');
    
    voteButtons.forEach(button => {
        button.addEventListener('click', function() {
            if (userVoted) {
                alert('You have already voted. Each community member can only vote once.');
                return;
            }
            
            const project = this.getAttribute('data-project');
            if (voteCounts[project] !== undefined) {
                voteCounts[project]++;
                userVoted = true;
                
                // Update button state
                this.classList.add('voted');
                this.innerHTML = '<i class="fas fa-check"></i> Voted';
                this.disabled = true;
                
                // Update vote counts and progress bars
                updateVoteResults();
                
                alert('Thank you for voting! Your vote has been recorded.');
            }
        });
    });
    
    // Initial vote results update
    updateVoteResults();
}

// Update voting results display
function updateVoteResults() {
    const totalVotes = voteCounts.water + voteCounts.education + voteCounts.health;
    
    if (totalVotes > 0) {
        // Update progress bars
        const waterVotes = document.querySelector('.water-votes');
        const educationVotes = document.querySelector('.education-votes');
        const healthVotes = document.querySelector('.health-votes');
        
        if (waterVotes) waterVotes.style.width = `${(voteCounts.water / totalVotes) * 100}%`;
        if (educationVotes) educationVotes.style.width = `${(voteCounts.education / totalVotes) * 100}%`;
        if (healthVotes) healthVotes.style.width = `${(voteCounts.health / totalVotes) * 100}%`;
        
        // Update percentage displays
        const voteCountElements = document.querySelectorAll('.vote-count');
        if (voteCountElements.length >= 3) {
            voteCountElements[0].textContent = `${Math.round((voteCounts.water / totalVotes) * 100)}%`;
            voteCountElements[1].textContent = `${Math.round((voteCounts.education / totalVotes) * 100)}%`;
            voteCountElements[2].textContent = `${Math.round((voteCounts.health / totalVotes) * 100)}%`;
        }
        
        // Update total votes
        const totalVotesElement = document.querySelector('.total-votes span');
        if (totalVotesElement) {
            totalVotesElement.textContent = `Total Votes: ${totalVotes}`;
        }
    }
}

// Initialize document downloads
function initializeDocumentDownloads() {
    const downloadButtons = document.querySelectorAll('.download-btn');
    
    downloadButtons.forEach(button => {
        button.addEventListener('click', function() {
            const docType = this.getAttribute('data-doc');
            const language = currentLanguage;
            
            // Simulate document download
            const documentNames = {
                minutes: 'Meeting_Minutes',
                actionPlan: 'Community_Action_Plan',
                results: 'Project_Results_Summary',
                financial: 'Financial_Summary'
            };
            
            const fileName = `${documentNames[docType]}_${language}.pdf`;
            
            // Create a temporary link for download
            const link = document.createElement('a');
            link.href = '#'; // In a real app, this would be the actual file URL
            link.download = fileName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert(`Downloading ${fileName} in ${language}...`);
        });
    });
}

// Initialize charts
function initializeCharts() {
    // Check if chart elements exist before initializing
    const benefitsChart = document.getElementById('benefitsChart');
    const progressChart = document.getElementById('progressChart');
    const financeChart = document.getElementById('financeChart');
    const revenueChart = document.getElementById('revenueChart');
    const co2Chart = document.getElementById('co2Chart');
    const livelihoodChart = document.getElementById('livelihoodChart');

    // Benefits Distribution Chart
    if (benefitsChart) {
        const benefitsCtx = benefitsChart.getContext('2d');
        new Chart(benefitsCtx, {
            type: 'doughnut',
            data: {
                labels: ['Direct Benefits', 'Community Projects', 'Administration'],
                datasets: [{
                    data: [70, 20, 10],
                    backgroundColor: ['#2E8B57', '#4ECDC4', '#FF6B6B'],
                    borderWidth: 2,
                    borderColor: '#ffffff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
    }

    // Progress Chart
    if (progressChart) {
        const progressCtx = progressChart.getContext('2d');
        new Chart(progressCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Mangroves Restored (ha)',
                    data: [50, 120, 200, 280, 350, 450],
                    borderColor: '#2E8B57',
                    backgroundColor: 'rgba(46, 139, 87, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }

    // Finance Chart
    if (financeChart) {
        const financeCtx = financeChart.getContext('2d');
        new Chart(financeCtx, {
            type: 'bar',
            data: {
                labels: ['Q3 2023', 'Q4 2023', 'Q1 2024'],
                datasets: [{
                    label: 'Benefits Distributed ($)',
                    data: [58450, 62800, 68500],
                    backgroundColor: '#4ECDC4'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }

    // Revenue Sources Chart
    if (revenueChart) {
        const revenueCtx = revenueChart.getContext('2d');
        new Chart(revenueCtx, {
            type: 'pie',
            data: {
                labels: ['Carbon Credits', 'Donations', 'Grants'],
                datasets: [{
                    data: [65, 20, 15],
                    backgroundColor: ['#2E8B57', '#FFA500', '#4A90E2'],
                    borderWidth: 2,
                    borderColor: '#ffffff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
    }

    // CO2 Reduction Chart
    if (co2Chart) {
        const co2Ctx = co2Chart.getContext('2d');
        new Chart(co2Ctx, {
            type: 'bar',
            data: {
                labels: ['2021', '2022', '2023', '2024'],
                datasets: [{
                    label: 'CO2e Sequestered (tons)',
                    data: [2500, 5800, 8900, 12500],
                    backgroundColor: '#2E8B57'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }

    // Livelihood Chart
    if (livelihoodChart) {
        const livelihoodCtx = livelihoodChart.getContext('2d');
        new Chart(livelihoodCtx, {
            type: 'doughnut',
            data: {
                labels: ['Fishing', 'Oyster Collection', 'Tourism', 'Other'],
                datasets: [{
                    data: [45, 30, 15, 10],
                    backgroundColor: ['#FF7F50', '#4A90E2', '#FFD700', '#9370DB'],
                    borderWidth: 2,
                    borderColor: '#ffffff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
    }
}

// Load sample data (in real app, this would be API calls)
function loadSampleData() {
    // This function would typically fetch data from APIs
    console.log('Loading sample data for REDD+ Mangrove Community Portal...');
    
    // Simulate API connection to REDD+ platform
    setTimeout(() => {
        console.log('REDD+ API connection established - Sample data loaded');
        // In a real implementation, we would update the UI with live data from REDD+ platform
    }, 1500);
}

// Utility function for number formatting
function formatNumber(num) {
    return new Intl.NumberFormat().format(num);
}

// Utility function for currency formatting
function formatCurrency(amount, currency = 'USD') {
    return new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: currency
    }).format(amount);
}

// Add some interactive features
function addInteractiveFeatures() {
    // Add click handlers for stat cards to show more details
    const statCards = document.querySelectorAll('.stat-card');
    statCards.forEach(card => {
        card.addEventListener('click', function() {
            this.style.transform = 'scale(0.98)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 150);
        });
    });
    
    // Add hover effects for member cards
    const memberCards = document.querySelectorAll('.member-card');
    memberCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.15)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.1)';
        });
    });
}